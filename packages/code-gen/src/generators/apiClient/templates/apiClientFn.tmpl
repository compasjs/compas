{{ const url = model.path.split("/").map(part => { if (part.startsWith(":")) { return "${params." + part.substring(1) + "}"; } else { return part; } }).join("/"); }}
{{ const buildTypeQualifier = (uniqueName, inputType) => `${options.useTypescript ? 'import("./types").'  : ""}${uniqueName}${inputType ? "_Input" : ""}`; }}

/**
 * {{= model.uniqueName }}
 {{ if (model.tags.length > 0 ) { }}* Tags: {{= model.tags.join(", ") }}{{ } }}
 * Docs: {{= model.docString }}
{{ if (model.params) { }}
 * @param { {{= buildTypeQualifier(model.params.reference.uniqueName, true) }} } params
{{ } }}
{{ if (model.query) { }}
 * @param { {{= buildTypeQualifier(model.query.reference.uniqueName, true) }} } query
{{ } }}
{{ if (model.body) { }}
 * @param { {{= buildTypeQualifier(model.body.reference.uniqueName, true) }} } body
{{ } }}
{{ if (model.files) { }}
 * @param { {{= buildTypeQualifier(model.files.reference.uniqueName, true) }} } files
{{ } }}
{{ if (model.response && getItem(model.response).type !== "file") { }}
 * @returns {Promise.<{{= buildTypeQualifier(model.response.reference.uniqueName, false) }}>}
{{ } else if (model.response) { }}
 * @returns {Promise.<{{= options.enabledGenerators.indexOf("router") !== -1 ? "ReadableStream" : "Blob" }}>}
{{ } else { }}
 * @returns {Promise.<*>}
{{ } }}

 */
{{= model.name }}: async function (
{{ if (model.params) { }}
params,
{{ } }}
{{ if (model.query) { }}
query,
{{ } }}
{{ if (model.body) { }}
body,
{{ } }}
{{ if (model.files) { }}
files,
{{ } }}
) {
    checkApiClient();

    {{ if (model.files) { }}
      // eslint-disable-next-line
      const data = new FormData();
      for (const key of Object.keys(files)) {
        const keyFiles = Array.isArray(files[key]) ? files[key] : [files[key]];
        for (const file of keyFiles) {
          data.append(key, file.data, file.name);
        }
      }
      {{ if (model.body) { }}
        for (const key of Object.keys(body)) {
          data.append(key, objectToQueryString(key, body[key]));
        }
      {{ } }}
    {{ } else if (model.body) { }}
      const data = body;
    {{ } }}

    const response = await _internalClient.request({
      url: `{{= url }}`,
      method: "{{= model.method.toLowerCase() }}",
      params: {{ if (model.query) { }}query{{ } else { }}{}{{ } }},
      data: {{ if (model.body || model.files) { }}data{{ } else { }}{}{{ } }},
      {{ if (model.files) { }}
      headers: {{ if (options.enabledGenerators.indexOf("router") !== -1) { }}data.getHeaders(){{ } else { }}{ "Content-Type": undefined }{{ } }},
      {{ } }}
      {{ if (model.response && getItem(model.response).type === "file") { }}
      responseType: "{{= options.enabledGenerators.indexOf("router") !== -1 ? "stream" : "blob" }}",
      {{ } }}
    });

    return response.data;
},
((newline))
