{{ for (const groupName of Object.keys(structure)) { }}
  {{ for (const itemName of Object.keys(structure[groupName])) { }}
    {{ const item = structure[groupName][itemName]; }}

    {{ if (item.type !== "object" || item.enableQueries !== true) { }}
    {{ continue; }}
    {{ } }}

    CREATE TABLE "{{= item.name }}" (
      {{ let count = Object.keys(item.keys || {}).length; }}
      {{ for (const key of Object.keys(item.keys|| {})) { }}
        {{ count--; }}
        "{{= key }}" {{= sqlExec({ type: getItem(item.keys[key]).type, item: { ...getItem(item.keys[key]), isOptional: getItem(item.keys[key])?.relationInfo?.isOptional ?? getItem(item.keys[key]).isOptional } }).trim() }}{{= getItem(item.keys[key]).relationInfo ? ` REFERENCES "${getItem(getItem(item.keys[key]).relationInfo.right).name}" ("${getItem(item.keys[key]).relationInfo.rightKey}")  ${getItem(item.keys[key]).relationInfo.isOptional ? "ON DELETE SET NULL" : "ON DELETE CASCADE"}` : "" }}{{= count !== 0 ? "," : "" }}
      {{ } }}
    );

    -- These are only for easy copy -pasting and should not be used as a guide!
    {{ for (const key of Object.keys(item.keys || {})) { }}
    {{ if (!getItem(item.keys[key])?.sql?.primary && getItem(item.keys[key])?.sql?.searchable) { }}
    CREATE INDEX {{= camelToSnakeCase(item.name) }}_{{= camelToSnakeCase(key) }}_idx ON "{{= item.name }}" ("{{= key }}");
    {{ } }}
    {{ } }}

    ((newline))
  {{ } }}
{{ } }}
